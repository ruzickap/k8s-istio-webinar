(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{249:function(t,a,e){t.exports=e.p+"assets/img/istio.a24267ed.svg"},308:function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAAAsCAIAAADka3H1AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFRUlEQVRoge2XX0hTbRjAn3OOtKOzzXnmQo+a25mLiY0hIRqSmTBQYUhgiTHwoi7Dq278F4R4IaK33TXwpoJs7FhGISKSQdT0IpcQbmf+iZbTsTzq2PTYxfm+fX7usy/3vau+73t/V4ftfZ73eX7b++cQ8XgcMIggf3YB/ymwTZRgmyjBNlGCbaIE20TJr27T6/X29fX97Cq+FyJN983h4eG1tbXf5iAIlUplNpttNhtN08fKs7W1FQqFTp8+nYYa/yAejz979uzdu3exWIxl2cbGxoKCghTyZCCvLEFdXV1lZSUASJIUCoV4nhdFsa2t7VhJlEqlUqlMT4EAAJIkkSQ5NjYWCASuXbumVCpfvHgxMjJy69Ytkjz2wk2jTZqm1Wq1/KzRaGw228OHD+Xqw+Gw2+32+/00TZtMpqamJkmS+vv729vbOY6TQ+7evavX64uKikZHR7u7uwEgOUoUxaGhoa6urqysLEmS7ty5U1FRYbfbAWBmZmZ+fv7GjRs+n+/p06dra2sqlaqysrKmpoYgiCdPnkSj0Z2dHUEQuru7CYKw2+3FxcUAYLPZBgcHw+EwwzDHbfnH7ZskSUqStL+/DwD3799nGKazs/PmzZtfvnzheT4zM7O0tNTr9cqDNzc3l5eXLRbLwQzJUQzDqNXq5eVlAFhdXc3JyREEQR4sCALHcaIojoyMXLhw4fbt2w6H49WrV7OzswBAUdSHDx8MBkNHRwcANDc3GwyGxNQZGRnZ2dmp9JiamuOysbExOTlpMpkoilpZWfn48WNDQ8OJEyeUSmV9ff3c3JwkSWfPnk3YnJ+fz8vLy8/PT2Q4KspgMAQCAQAQBKG8vHx7e3tnZwcAAoEAx3Gzs7Msy1osFpIkdTpdVVWVx+ORE1IUdf78+ZMnTx6sMxqNulyu2tpahUKRQptpXOnPnz+fmJgAgP39/b29vTNnzly+fBkANjY29vb2enp6Dg6ORCJlZWWPHz9eXV1lWdbr9R76Yx4VxXHcmzdvAMDv91dXVweDwaWlJYZhYrFYUVGRx+Px+XydnZ2JEI1GIz8kL+RIJOJ0OktKSi5dupRay39jU96wvofke0xNTc25c+cAIBAIuN3upqYm+TwhCIKm6d7e3uQkRqPR6/VqNBqfzydvfwmOiqIoyuVy7e7uLi0tXb16NRgM+v1+URT1ej1JkgRBmM1mh8ORPFdGxp96//Tpk9PprKqqunjx4ne2/Bc5v/31P7nrZWVlyb8/wzALCwuPHj26fv06QRC5ubnRaDQSichnVCwWi8fjsmiLxTI9Pa3VavPz87Va7cFsR0WpVCq1Wu3xeHJychQKRXFx8fj4+NbWlnyaabXaxcXFRBJRFGmaPuQRAMLh8L179xoaGqxWa8r9wg/bN+12ezAYfPnyJQCwLFtYWMjz/Pb2djQadbvdDx48kIeZzeZQKPT27dtDy/zbUQaDYWZmRr6Tsiz7+fNnQRCMRiMAWK3Wzc3Nqamp3d3dcDjsdDqnp6eTy+N5nuM4vV4f+Z3UruFp3DcPkp2d3djY6HK5TCaTTqdrbW3leX5gYIAkSY7jrly5Ig9TKBSlpaXv379vaWlJTnJUlNFofP36dX19PQBQFKXT6dbX10+dOiXP63A4xsfHJyYmMjMzrVZrbW3tobSxWGxhYQEA5ubmEh+2tbWVl5cft810vQv9P/nV39P/XWCbKME2UYJtogTbRAm2iRJsEyXYJkqwTZRgmyjBNlGCbaIE20QJtokSbBMl2CZKsE2UYJsowTZRgm2iBNtECbaJEmwTJdgmSrBNlHwFGGA5ftmDV+4AAAAASUVORK5CYII="},309:function(t,a){t.exports="data:image/png;base64,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"},310:function(t,a){t.exports="data:image/png;base64,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"},311:function(t,a,e){t.exports=e.p+"assets/img/crt_sh.62999733.png"},312:function(t,a,e){t.exports=e.p+"assets/img/kiali_ssl_certificate.666bf9f2.png"},313:function(t,a,e){t.exports=e.p+"assets/img/bookinfo_v1_v3_v2.d76ff3b4.gif"},314:function(t,a,e){t.exports=e.p+"assets/img/istio_kiali_graph.5f2d46a7.gif"},315:function(t,a,e){t.exports=e.p+"assets/img/servicegraph_istio_service_graph.fc558d6e.png"},316:function(t,a,e){t.exports=e.p+"assets/img/servicegraph_dotviz.9fd85b88.png"},317:function(t,a,e){t.exports=e.p+"assets/img/kiali.836b5bd9.png"},318:function(t,a,e){t.exports=e.p+"assets/img/jaeger.337c5009.png"},319:function(t,a,e){t.exports=e.p+"assets/img/prometheus_istio_requests_total1.940c7a1e.png"},320:function(t,a,e){t.exports=e.p+"assets/img/prometheus_istio_requests_total2.0cc234e0.png"},321:function(t,a,e){t.exports=e.p+"assets/img/prometheus_istio_requests_total3.0b522b0d.png"},322:function(t,a,e){t.exports=e.p+"assets/img/prometheus_istio_requests_total4.43a1d944.png"},323:function(t,a,e){t.exports=e.p+"assets/img/grafana_istio_performance_dashboard.f8890998.png"},324:function(t,a,e){t.exports=e.p+"assets/img/grafana_istio_service_dashboard.23cdab30.png"},325:function(t,a,e){t.exports=e.p+"assets/img/grafana_istio_workload_dashboard.4fa52776.png"},326:function(t,a,e){t.exports=e.p+"assets/img/grafana_istio_galley_dashboard.af903931.png"},327:function(t,a,e){t.exports=e.p+"assets/img/grafana_istio_mixer_dashboard.ccd84584.png"},328:function(t,a,e){t.exports=e.p+"assets/img/grafana_istio_pilot_dashboard.083e833c.png"},347:function(t,a,e){"use strict";e.r(a);var s=e(8),n=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"istio-bookinfo-application"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#istio-bookinfo-application"}},[t._v("#")]),t._v(" Istio - Bookinfo Application")]),t._v(" "),a("p",[t._v("Deploy the demo of "),a("a",{attrs:{href:"https://istio.io/docs/examples/bookinfo/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Bookinfo"),a("OutboundLink")],1),t._v(" application:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# kubectl apply -f <(istioctl kube-inject -f samples/bookinfo/platform/kube/bookinfo.yaml)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tail")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-40")]),t._v(" samples/bookinfo/platform/kube/bookinfo.yaml\nkubectl apply "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" samples/bookinfo/platform/kube/bookinfo.yaml\n")])])]),a("p",[t._v("Output:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("---\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##################################################################################################")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Productpage services")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##################################################################################################")]),t._v("\napiVersion: v1\nkind: Service\nmetadata:\n  name: productpage\n  labels:\n    app: productpage\n    service: productpage\nspec:\n  ports:\n  - port: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9080")]),t._v("\n    name: http\n  selector:\n    app: productpage\n---\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  name: productpage-v1\n  labels:\n    app: productpage\n    version: v1\nspec:\n  replicas: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n  template:\n    metadata:\n      labels:\n        app: productpage\n        version: v1\n    spec:\n      containers:\n      - name: productpage\n        image: istio/examples-bookinfo-productpage-v1:1.10.1\n        imagePullPolicy: IfNotPresent\n        ports:\n        - containerPort: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9080")]),t._v("\n---\n")])])]),a("p",[t._v("Example with "),a("code",[t._v("istioctl")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("istioctl kube-inject "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" samples/bookinfo/platform/kube/bookinfo.yaml "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tail")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-172")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("400")]),t._v("\n")])])]),a("p",[t._v("Output:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\napiVersion: extensions/v1beta1\nkind: Deployment\nmetadata:\n  creationTimestamp: null\n  labels:\n    app: productpage\n    version: v1\n  name: productpage-v1\nspec:\n  replicas: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n  strategy: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  template:\n    metadata:\n      annotations:\n        sidecar.istio.io/status: "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('\'{"version":"1d03c7b8369fddca69b40289a75eabb02e48b68ad5516e6975265f215d382f74","initContainers":["istio-init"],"containers":["istio-proxy"],"volumes":["istio-envoy","istio-certs"],"imagePullSecrets":null}\'')]),t._v("\n      creationTimestamp: null\n      labels:\n        app: productpage\n        version: v1\n    spec:\n      containers:\n      - image: istio/examples-bookinfo-productpage-v1:1.10.1\n        imagePullPolicy: IfNotPresent\n        name: productpage\n        ports:\n        - containerPort: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9080")]),t._v("\n        resources: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n        image: docker.io/istio/proxyv2:1.1.0\n        imagePullPolicy: IfNotPresent\n        name: istio-proxy\n        ports:\n        - containerPort: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15090")]),t._v("\n          name: http-envoy-prom\n          protocol: TCP\n")])])]),a("p",[t._v("The Bookinfo application is broken into four separate microservices:")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("productpage")]),t._v(" - the productpage microservice calls the details and reviews\nmicroservices to populate the page.")]),t._v(" "),a("li",[a("code",[t._v("details")]),t._v(" - the details microservice contains book information.")]),t._v(" "),a("li",[a("code",[t._v("reviews")]),t._v(" - the reviews microservice contains book reviews. It also calls\nthe ratings microservice.")]),t._v(" "),a("li",[a("code",[t._v("ratings")]),t._v(" - the ratings microservice contains book ranking information\nthat accompanies a book review.")])]),t._v(" "),a("p",[t._v("There are 3 versions of the "),a("code",[t._v("reviews")]),t._v(" microservice:")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Version "),a("code",[t._v("v1")]),t._v(" - doesn't call the "),a("strong",[t._v("ratings service")]),t._v(".")]),t._v(" "),a("p",[a("img",{attrs:{src:e(308),alt:"Bookinfo v1",title:"Bookinfo v1"}})])]),t._v(" "),a("li",[a("p",[t._v("Version "),a("code",[t._v("v2")]),t._v(" - calls the ratings service, and displays each rating as 1 to 5\n"),a("strong",[t._v("black stars")]),t._v(".")]),t._v(" "),a("p",[a("img",{attrs:{src:e(309),alt:"Bookinfo v2",title:"Bookinfo v2"}})])]),t._v(" "),a("li",[a("p",[t._v("Version "),a("code",[t._v("v3")]),t._v(" - calls the ratings service, and displays each rating as 1 to 5\n"),a("strong",[t._v("red stars")]),t._v(".")]),t._v(" "),a("p",[a("img",{attrs:{src:e(310),alt:"Bookinfo v3",title:"Bookinfo v3"}})])])]),t._v(" "),a("p",[a("a",{attrs:{href:"https://istio.io/docs/examples/bookinfo/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Bookinfo"),a("OutboundLink")],1),t._v(" application architecture:")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/istio/istio.io/7bf371365e4a16a9a13c0e79355fe1eac7f8f99f/content/docs/examples/bookinfo/withistio.svg?sanitize=true",alt:"Application Architecture with Istio",title:"Application Architecture with Istio"}})]),t._v(" "),a("p",[t._v("Confirm all services and pods are correctly defined and running:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("kubectl get svc,deployment,pods "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" wide\n")])])]),a("p",[t._v("Output:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("NAME                  TYPE        CLUSTER-IP       EXTERNAL-IP   PORT"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("S"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("    AGE   SELECTOR\nservice/details       ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.100")]),t._v(".84.225    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9080")]),t._v("/TCP   2m    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("details\nservice/kubernetes    ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.100")]),t._v(".0.1       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v("/TCP    21m   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\nservice/productpage   ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.100")]),t._v(".111.89    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9080")]),t._v("/TCP   2m    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("productpage\nservice/ratings       ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.100")]),t._v(".217.110   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9080")]),t._v("/TCP   2m    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ratings\nservice/reviews       ClusterIP   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.100")]),t._v(".83.162    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("        "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9080")]),t._v("/TCP   2m    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("reviews\n\nNAME                                   DESIRED   CURRENT   UP-TO-DATE   AVAILABLE   AGE   CONTAINERS    IMAGES                                          SELECTOR\ndeployment.extensions/details-v1       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("           2m    details       istio/examples-bookinfo-details-v1:1.10.1       "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("details,version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("v1\ndeployment.extensions/productpage-v1   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("           2m    productpage   istio/examples-bookinfo-productpage-v1:1.10.1   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("productpage,version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("v1\ndeployment.extensions/ratings-v1       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("           2m    ratings       istio/examples-bookinfo-ratings-v1:1.10.1       "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("ratings,version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("v1\ndeployment.extensions/reviews-v1       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("           2m    reviews       istio/examples-bookinfo-reviews-v1:1.10.1       "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("reviews,version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("v1\ndeployment.extensions/reviews-v2       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("           2m    reviews       istio/examples-bookinfo-reviews-v2:1.10.1       "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("reviews,version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("v2\ndeployment.extensions/reviews-v3       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("         "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("            "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("           2m    reviews       istio/examples-bookinfo-reviews-v3:1.10.1       "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("reviews,version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("v3\n\nNAME                                  READY   STATUS    RESTARTS   AGE   IP               NODE                                              NOMINATED NODE\npod/details-v1-68868454f5-sphh7       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          2m    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".13.128   ip-192-168-26-217.eu-central-1.compute.internal   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\npod/productpage-v1-5cb458d74f-wwcqc   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          2m    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".76.160   ip-192-168-69-19.eu-central-1.compute.internal    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\npod/ratings-v1-76f4c9765f-lzgpb       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          2m    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".91.69    ip-192-168-69-19.eu-central-1.compute.internal    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\npod/reviews-v1-56f6855586-rnkjj       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          2m    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".77.69    ip-192-168-69-19.eu-central-1.compute.internal    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\npod/reviews-v2-65c9df47f8-sq2vh       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          2m    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".8.68     ip-192-168-26-217.eu-central-1.compute.internal   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\npod/reviews-v3-6cf47594fd-nw8hv       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("/2     Running   "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("          2m    "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".6.236    ip-192-168-26-217.eu-central-1.compute.internal   "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("none"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("Check the container details - you should see also container "),a("code",[t._v("istio-proxy")]),t._v(" next\nto "),a("code",[t._v("productpage")]),t._v(" container.")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("kubectl describe pod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("productpage\n")])])]),a("p",[t._v("Output:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Containers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("productpage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Container ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("   docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//62984fbf7913e8cd91e5188571c7efad781880966a0d9b36279f368ad9cbf2a0\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("          istio/examples"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("bookinfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("productpage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("v1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("1.10.1\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("istio-proxy")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Container ID")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  docker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//17a2c6c87b1e8f315417b284973452332ea34162543af46776075ad1f43db327\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("Image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("         docker.io/istio/proxyv2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("1.1.0\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n")])])]),a("p",[t._v("The "),a("code",[t._v("kubectl logs")]),t._v(" command will show you the output of the envoy proxy\n("),a("code",[t._v("istio-proxy")]),t._v("):")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("kubectl logs "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("kubectl get pod "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("app")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("productpage "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("jsonpath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{.items[0].metadata.name}"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(" istio-proxy "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("head")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-70")]),t._v("\n")])])]),a("p",[t._v("Output:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-03-29T09:49:07.660863Z     info    Effective config: binaryPath: /usr/local/bin/envoy\nconcurrency: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\nconfigPath: /etc/istio/proxy\nconnectTimeout: 10s\ndiscoveryAddress: istio-pilot.istio-system:15010\ndrainDuration: 45s\nparentShutdownDuration: 60s\nproxyAdminPort: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15000")]),t._v("\nserviceCluster: productpage.default\nstatNameLength: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("189")]),t._v("\ntracing:\n  zipkin:\n    address: zipkin.istio-system:9411\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-03-29T09:49:07.660886Z     info    Monitored certs: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("envoy.CertSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("envoy.CertSource"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Directory:"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/etc/certs/"')]),t._v(", Files:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cert-chain.pem"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key.pem"')]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root-cert.pem"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-03-29T09:49:07.660896Z     info    PilotSAN "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("string"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("nil"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-03-29T09:49:07.660996Z     info    Opening status port "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15020")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-03-29T09:49:07.661159Z     info    Starting proxy agent\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-03-29T09:49:07.661340Z     info    Received new config, resetting budget\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-03-29T09:49:07.661349Z     info    Reconciling retry "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("budget "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-03-29T09:49:07.661359Z     info    Epoch "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" starting\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v("-03-29T09:49:07.662335Z     info    Envoy command: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("-c /etc/istio/proxy/envoy-rev0.json --restart-epoch "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" --drain-time-s "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("45")]),t._v(" --parent-shutdown-time-s "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" --service-cluster productpage.default --service-node sidecar~192.168.76.160~productpage-v1-5cb458d74f-wwcqc.default~default.svc.cluster.local --max-obj-name-len "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("189")]),t._v(" --allow-unknown-fields "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-l")]),t._v(" warning "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--concurrency")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),a("p",[t._v("Define the "),a("a",{attrs:{href:"https://istio.io/docs/reference/config/networking/gateway/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Istio gateway"),a("OutboundLink")],1),t._v("\nfor the application:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" samples/bookinfo/networking/bookinfo-gateway.yaml\nkubectl apply "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" samples/bookinfo/networking/bookinfo-gateway.yaml\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sleep")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n")])])]),a("p",[t._v("Output:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" networking.istio.io/v1alpha3\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Gateway\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bookinfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("gateway\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("selector")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("istio")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ingressgateway "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# use istio default controller")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("servers")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" http\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("protocol")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" HTTP\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hosts")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" networking.istio.io/v1alpha3\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" VirtualService\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" bookinfo\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hosts")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gateways")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" bookinfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("gateway\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("http")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("match")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("exact")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /productpage\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("exact")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /login\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("exact")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /logout\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("prefix")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /api/v1/products\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("route")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("destination")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" productpage\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("number")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9080")]),t._v("\n")])])]),a("p",[t._v("Create and display default "),a("a",{attrs:{href:"https://istio.io/docs/reference/config/networking/destination-rule/",target:"_blank",rel:"noopener noreferrer"}},[t._v("destination rules"),a("OutboundLink")],1),t._v("\n(subsets) for the Bookinfo services:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("kubectl apply "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-f")]),t._v(" samples/bookinfo/networking/destination-rule-all.yaml\nkubectl get destinationrules "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" yaml\n")])])]),a("p",[t._v("Display the destination rules:")]),t._v(" "),a("p",[t._v("Output:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" networking.istio.io/v1alpha3\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" DestinationRule\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" reviews\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namespace")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" default\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("host")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" reviews\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("subsets")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v2\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v2\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v3\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v3\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("...")]),t._v("\n")])])]),a("p",[t._v("Confirm the gateway and virtualsevice has been created:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("kubectl get gateway,virtualservice,destinationrule\n")])])]),a("p",[t._v("Output:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("NAME                                           AGE\ngateway.networking.istio.io/bookinfo-gateway   13s\n\nNAME                                          GATEWAYS             HOSTS   AGE\nvirtualservice.networking.istio.io/bookinfo   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("bookinfo-gateway"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("     13s\n\nNAME                                              HOST          AGE\ndestinationrule.networking.istio.io/details       details       8s\ndestinationrule.networking.istio.io/productpage   productpage   8s\ndestinationrule.networking.istio.io/ratings       ratings       8s\ndestinationrule.networking.istio.io/reviews       reviews       8s\n")])])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/istio/istio.io/92bc65af57592294102e1bc2cb13b333b44a73e0/content/blog/2018/v1alpha3-routing/virtualservices-destrules.svg?sanitize=true",alt:"Gateway -> VirtualService -> DestinationRule",title:"Gateway -> VirtualService -> DestinationRule"}})]),t._v(" "),a("p",[t._v("Check the SSL certificate:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" openssl s_client "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-showcerts")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-connect")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${MY_DOMAIN}")]),t._v(":443 "),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),t._v("/dev/null "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" openssl x509 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-inform")]),t._v(" pem "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-noout")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-text")]),t._v("\n")])])]),a("p",[t._v("Output:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("Certificate:\n    Data:\n        Version: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("0x2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        Serial Number:\n            03:ba:eb:a2:34:43:0c:ae:7b:63:64:4d:4a:ee:c1:25:b4:35\n    Signature Algorithm: sha256WithRSAEncryption\n        Issuer: C "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" US, O "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Let"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s Encrypt, CN = Let'")]),t._v("s Encrypt Authority X3\n        Validity\n            Not Before: Mar "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("29")]),t._v(" 08:46:52 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" GMT\n            Not After "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" Jun "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v(" 08:46:52 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2019")]),t._v(" GMT\n        Subject: CN "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" *.mylabs.dev\n        Subject Public Key Info:\n            Public Key Algorithm: rsaEncryption\n                Public-Key: "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),t._v(" bit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                Modulus:\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n        X509v3 extensions:\n            X509v3 Key Usage: critical\n                Digital Signature, Key Encipherment\n            X509v3 Extended Key Usage:\n                TLS Web Server Authentication, TLS Web Client Authentication\n            X509v3 Basic Constraints: critical\n                CA:FALSE\n            X509v3 Subject Key Identifier:\n                AB:60:E9:ED:3F:40:72:83:7D:62:08:F9:EB:8F:EA:1C:42:CC:76:4E\n            X509v3 Authority Key Identifier:\n                keyid:A8:4A:6A:63:04:7D:DD:BA:E6:D1:39:B7:A6:45:65:EF:F3:A8:EC:A1\n\n            Authority Information Access:\n                OCSP - URI:http://ocsp.int-x3.letsencrypt.org\n                CA Issuers - URI:http://cert.int-x3.letsencrypt.org/\n\n            X509v3 Subject Alternative Name:\n                DNS:*.mylabs.dev, DNS:mylabs.dev\n            X509v3 Certificate Policies:\n                Policy: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.23")]),t._v(".140.1.2.1\n                Policy: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.3")]),t._v(".6.1.4.1.44947.1.1.1\n                  CPS: http://cps.letsencrypt.org\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\n")])])]),a("p",[t._v("You can see it in the certificate transparency log: "),a("a",{attrs:{href:"https://crt.sh/?q=mylabs.dev",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://crt.sh/?q=mylabs.dev"),a("OutboundLink")],1),t._v(")")]),t._v(" "),a("p",[a("img",{attrs:{src:e(311),alt:"crt.sh Certificate",title:"crt.sh Certificate"}})]),t._v(" "),a("p",[t._v("SSL Certificate in Kiali "),a("a",{attrs:{href:"https://kiali.mylabs.dev",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://kiali.mylabs.dev"),a("OutboundLink")],1),t._v("\nweb page:")]),t._v(" "),a("p",[a("img",{attrs:{src:e(312),alt:"Kiali SSL Certificate displayed in browser",title:"Kiali SSL Certificate displayed in browser"}})]),t._v(" "),a("p",[t._v("You can also use the "),a("a",{attrs:{href:"https://github.com/jetstack/cert-manager",target:"_blank",rel:"noopener noreferrer"}},[t._v("cert-manager"),a("OutboundLink")],1),t._v("\ndirectly to see the status of the certificate:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("kubectl describe certificates ingress-cert-"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${LETSENCRYPT_ENVIRONMENT}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" istio-system\n")])])]),a("p",[t._v("Output:")]),t._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('Name:         ingress-cert-production\nNamespace:    istio-system\nLabels:       &lt;none>\nAnnotations:  kubectl.kubernetes.io/last-applied-configuration:\n                {"apiVersion":"certmanager.k8s.io/v1alpha1","kind":"Certificate","metadata":{"annotations":{},"name":"ingress-cert-production","namespace"...\nAPI Version:  certmanager.k8s.io/v1alpha1\nKind:         Certificate\nMetadata:\n  Creation Timestamp:  2019-03-29T09:43:02Z\n  Generation:          1\n  Resource Version:    2854\n  Self Link:           /apis/certmanager.k8s.io/v1alpha1/namespaces/istio-system/certificates/ingress-cert-production\n  UID:                 0b677790-5207-11e9-ac06-02dc9c152bfa\nSpec:\n  Acme:\n    Config:\n      Dns 01:\n        Provider:  aws-route53\n      Domains:\n        *.mylabs.dev\n        mylabs.dev\n  Common Name:  *.mylabs.dev\n  Dns Names:\n    *.mylabs.dev\n    mylabs.dev\n  Issuer Ref:\n    Kind:       ClusterIssuer\n    Name:       letsencrypt-production-dns\n  Secret Name:  ingress-cert-production\nStatus:\n  Conditions:\n    Last Transition Time:  2019-03-29T09:46:53Z\n    Message:               Certificate is up to date and has not expired\n    Reason:                Ready\n    Status:                True\n    Type:                  Ready\n  Not After:               2019-06-27T08:46:52Z\nEvents:\n  Type     Reason          Age                  From          Message\n  ----     ------          ----                 ----          -------\n  Warning  IssuerNotReady  9m9s (x2 over 9m9s)  cert-manager  Issuer letsencrypt-production-dns not ready\n  Normal   Generated       9m8s                 cert-manager  Generated new private key\n  Normal   OrderCreated    9m8s                 cert-manager  Created Order resource "ingress-cert-production-3383842614"\n  Normal   OrderComplete   5m18s                cert-manager  Order "ingress-cert-production-3383842614" completed successfully\n  Normal   CertIssued      5m18s                cert-manager  Certificate issued successfully\n')])])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/jetstack/cert-manager/4f30ed75e88e5d0defeb950501b5cac6da7fa7fe/docs/images/high-level-overview.png",alt:"cert-manager high level overview",title:"cert-manager high level overview"}})]),t._v(" "),a("p",[t._v("Confirm the app is running:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" /dev/null "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%{http_code}"')]),t._v(" http://"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${MY_DOMAIN}")]),t._v("/productpage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v("\n")])])]),a("p",[t._v("Output:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),t._v("\n")])])]),a("p",[t._v("Generate some traffic for next 5 minutes to gather some data for monitoring:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("siege "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--log")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/tmp/siege "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--concurrent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-q")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--internet")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--time")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("10M http://"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${MY_DOMAIN}")]),t._v("/productpage "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&>")]),t._v(" /dev/null "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])])]),a("p",[t._v("In case of DNS issue you can use the services exposed on ports directly from\nloadbalancer:")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("kubectl "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-n")]),t._v(" istio-system get "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" istio-ingressgateway "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-o")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("jsonpath")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{.status.loadBalancer.ingress[0].hostname}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v("\n")])])]),a("p",[t._v("Output:")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("abd0be556520611e9ac0602dc9c152bf-2144127322.eu-central-1.elb.amazonaws.com\n")])])]),a("ul",[a("li",[t._v("Kiali: "),a("code",[t._v("http://<IP ADDRESS OF CLUSTER INGRESS>:15029")])]),t._v(" "),a("li",[t._v("Prometheus: "),a("code",[t._v("http://<IP ADDRESS OF CLUSTER INGRESS>:15030")])]),t._v(" "),a("li",[t._v("Grafana: "),a("code",[t._v("http://<IP ADDRESS OF CLUSTER INGRESS>:15031")])]),t._v(" "),a("li",[t._v("Tracing: "),a("code",[t._v("http://<IP ADDRESS OF CLUSTER INGRESS>:15032")])])]),t._v(" "),a("p",[t._v("Open the Bookinfo site in your browser "),a("a",{attrs:{href:"http://mylabs.dev/productpage",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://mylabs.dev/productpage"),a("OutboundLink")],1),t._v("\nand refresh the page several times - you should see different versions\nof reviews shown in productpage, presented in a "),a("strong",[t._v("round robin style")]),t._v("\n(red stars, black stars, no stars), since we haven't yet used Istio to control\nthe version routing.")]),t._v(" "),a("p",[a("img",{attrs:{src:e(313),alt:"Bookinfo v1, v3, v2",title:"Bookinfo v1, v3, v2"}})]),t._v(" "),a("p",[t._v("Check the flows in "),a("a",{attrs:{href:"https://kiali.mylabs.dev/console/graph/namespaces/?edges=requestsPercentOfTotal&graphType=versionedApp&namespaces=default&injectServiceNodes=true&duration=60&pi=5000&layout=dagre",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kiali"),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("p",[a("img",{attrs:{src:e(314),alt:"Istio Graph",title:"Istio Graph"}})]),t._v(" "),a("p",[t._v("Open the browser with these pages:")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Servicegraph:")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://servicegraph.mylabs.dev/force/forcegraph.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://servicegraph.mylabs.dev/force/forcegraph.html"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:e(315),alt:"Istio Service Graph",title:"Istio Service Graph"}})])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://servicegraph.mylabs.dev/dotviz",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://servicegraph.mylabs.dev/dotviz"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:e(316),alt:"Service Graph - dotviz",title:"Service Graph - dotviz"}})])])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://www.kiali.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kiali"),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://kiali.mylabs.dev",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://kiali.mylabs.dev"),a("OutboundLink")],1),t._v(" (admin/admin)")]),t._v(" "),a("p",[a("img",{attrs:{src:e(317),alt:"Kiali",title:"Kiali"}})])])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://www.jaegertracing.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Jaeger"),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://jaeger.mylabs.dev",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://jaeger.mylabs.dev"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:e(318),alt:"Jaeger",title:"Jaeger"}})])])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://prometheus.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prometheus"),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://prometheus.mylabs.dev/graph?g0.range_input=1h&g0.expr=istio_requests_total&g0.tab=0",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://prometheus.mylabs.dev/graph?g0.range_input=1h&g0.expr=istio_requests_total&g0.tab=0"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:e(319),alt:"Prometheus - istio_requests_total",title:"Prometheus - istio_requests_total"}})])]),t._v(" "),a("li",[a("p",[t._v("Total count of all requests to the productpage service:")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://prometheus.mylabs.dev/graph?g0.range_input=1h&g0.expr=istio_requests_total%7Bdestination_service%3D%22productpage.default.svc.cluster.local%22%7D&g0.tab=0",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://prometheus.mylabs.dev/graph?g0.range_input=1h&g0.expr=istio_requests_total%7Bdestination_service%3D%22productpage.default.svc.cluster.local%22%7D&g0.tab=0"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:e(320),alt:"Prometheus - istio_requests_total",title:"Prometheus - istio_requests_total"}})])])])]),t._v(" "),a("li",[a("p",[t._v("Total count of all requests to "),a("code",[t._v("v1")]),t._v(" of the reviews service:")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://prometheus.mylabs.dev/graph?g0.range_input=1h&g0.expr=istio_requests_total%7Bdestination_service%3D%22reviews.default.svc.cluster.local%22%2C%20destination_version%3D%22v1%22%7D&g0.tab=0",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://prometheus.mylabs.dev/graph?g0.range_input=1h&g0.expr=istio_requests_total%7Bdestination_service%3D%22reviews.default.svc.cluster.local%22%2C%20destination_version%3D%22v1%22%7D&g0.tab=0"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:e(321),alt:"Prometheus - istio_requests_total",title:"Prometheus - istio_requests_total"}})])])])]),t._v(" "),a("li",[a("p",[t._v("Rate of requests over the past 5 minutes to all instances of the productpage\nservice:")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://prometheus.mylabs.dev/graph?g0.range_input=1h&g0.expr=rate(istio_requests_total%7Bdestination_service%3D~%22productpage.*%22%2C%20response_code%3D%22200%22%7D%5B5m%5D)&g0.tab=0",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://prometheus.mylabs.dev/graph?g0.range_input=1h&g0.expr=rate(istio_requests_total%7Bdestination_service%3D~%22productpage.*%22%2C%20response_code%3D%22200%22%7D%5B5m%5D)&g0.tab=0"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:e(322),alt:"Prometheus - istio_requests_total",title:"Prometheus - istio_requests_total"}})])])])])])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://grafana.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana"),a("OutboundLink")],1),t._v(":")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://grafana.mylabs.dev",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://grafana.mylabs.dev"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[t._v("Grafana -> Home -> Istio ->")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("Istio Performance Dashboard")]),t._v(" "),a("p",[a("img",{attrs:{src:e(323),alt:"Grafana - Istio Performance Dashboard",title:"Grafana - Istio Performance Dashboard"}})])]),t._v(" "),a("li",[a("p",[t._v("Istio Service Dashboard")]),t._v(" "),a("p",[a("img",{attrs:{src:e(324),alt:"Grafana - Istio Service Dashboard",title:"Grafana - Istio Service Dashboard"}})])]),t._v(" "),a("li",[a("p",[t._v("Istio Workload Dashboard")]),t._v(" "),a("p",[a("img",{attrs:{src:e(325),alt:"Grafana - Istio Workload Dashboard",title:"Grafana - Istio Workload Dashboard"}})])]),t._v(" "),a("li",[a("p",[t._v("Istio Galley Dashboard")]),t._v(" "),a("p",[a("img",{attrs:{src:e(326),alt:"Grafana - Galley Dashboard",title:"Grafana - Galley Dashboard"}})])]),t._v(" "),a("li",[a("p",[t._v("Istio Mixer Dashboard")]),t._v(" "),a("p",[a("img",{attrs:{src:e(327),alt:"Grafana - Mixer Dashboard",title:"Grafana - Mixer Dashboard"}})])]),t._v(" "),a("li",[a("p",[t._v("Istio Pilot Dashboard")]),t._v(" "),a("p",[a("img",{attrs:{src:e(328),alt:"Grafana - Pilot Dashboard",title:"Grafana - Pilot Dashboard"}})])])])])])])]),t._v(" "),a("p",[a("img",{attrs:{src:e(249),alt:"Istio",title:"Istio"}})])])}),[],!1,null,null,null);a.default=n.exports}}]);